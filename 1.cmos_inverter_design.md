# EEE 301 Lab – CMOS Inverter Design and Simulation

## Objective
Design and simulate a **CMOS inverter** using an open-source IC design tool.  
This session introduces:

- Device selection (NMOS, PMOS)  
- Capacitive load modeling  
- Schematic capture using Xschem  
- Wiring and layout basics  
- Simulation using NGSPICE  

---

## Reference
- Textbook: *Microelectronic Devices and Circuits* by Howen and Sodini  
- CMOS Inverter design: Figure 5.18C  
- Process Nodes:
  - SkyWater 130nm: 1.8V (course standard)  
  - GlobalFoundries 180nm: 3.3V (used for demonstration)  

---

## CMOS Inverter Overview

- Consists of **NMOS** and **PMOS** devices.  
- A **capacitor** is included at the output to model the expected capacitive load.  
  - Simulates the environment where the inverter drives other MOSFET gates.  
- Understanding capacitive loading is critical in digital circuits.

---

## Tools and Dependencies

To follow the lab on Windows, you need the following:

1. **ActiveTcl 8.6**
   - Required for Xschem GUI.  
   - Download: [ActiveTcl 8.6 Windows 64-bit](https://dl.activestate.com/camel-builds/ActiveTcl/MSWin32-x64/20250111T170338Z/ActiveTcl-8.6.14.0000-MSWin32-x64-89732998.exe)  
   - Install it first. Verify with:
     ```bash
     tclsh
     puts [info patchlevel]
     ```
     Output should show `8.6.xx`.

2. **Xschem**
   - Schematic capture tool used in the course.  
   - Download: [Xschem Official Page](https://xschem.sourceforge.io/stefan/index.html)  
   - Install **after ActiveTcl**.

3. **NGSPICE**
   - Circuit simulator backend for Xschem.  
   - Download: [NGSPICE Official Page](http://ngspice.sourceforge.net/download.html)  
   - Install and note the path to `ngspice.exe`.

4. **SkyWater 130nm PDK**
   - Provides NMOS, PMOS, capacitors, resistors, and libraries for IC design.  
   - Clone/download from GitHub:  
     ```
     git clone https://github.com/google/skywater-pdk
     ```
   - Configure Xschem to load the PDK library (symbols, models, include files).

> Optional: GlobalFoundries 180nm PDK can be used for demonstration, workflow is the same.

---

## Steps in Schematic Capture (Xschem)

1. **Start Xschem**
   - Ensure ActiveTcl is installed.  
   - Load PDK library (SkyWater or GF180).  

2. **Create a new schematic**
   - Click **Add → New Schematic**.

3. **Insert devices**
   - Shortcut: `Shift + I` → Insert symbol.  
   - Select devices from the PDK library:
     - NMOS transistor  
     - PMOS transistor  

4. **Place devices**
   - Drop devices into workspace.  
   - Rearrange for clarity: select → press `M` to move.

5. **Insert wiring**
   - Shortcut: `W` → wire.  
   - CMOS inverter connections:
     - Gates of NMOS and PMOS → input  
     - Drains of NMOS and PMOS → output  
     - PMOS source → VDD  
     - NMOS source → GND  

6. **Arrange power supply and output**
   - VDD at top, GND at bottom, output in the middle.

7. **Run simulation**
   - Make sure Xschem points to NGSPICE (`Settings → Simulator`).  
   - Run transient / DC / AC analysis to verify CMOS inverter behavior.

---

## Notes on the Interface

- Xschem shortcuts differ from standard schematic tools:  
  - `Shift + I` → Insert symbol  
  - `W` → Wire  
  - `M` → Move devices  
- Always use **PDK devices**, not generic symbols.  
- Adjust workspace zoom for clarity.

---

## Next Step

- Complete schematic capture for the CMOS inverter.  
- Run **transient simulation** in NGSPICE to verify functionality.  
- Optionally proceed to layout/post-layout simulation using tools like **Magic** or **KLayout**.

---
